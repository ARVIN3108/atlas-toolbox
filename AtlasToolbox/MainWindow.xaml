<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="AtlasToolbox.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:AtlasToolbox"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="using:AtlasToolbox.Controls"
    mc:Ignorable="d">
    <Window.SystemBackdrop>
        <MicaBackdrop Kind="Base"/>
    </Window.SystemBackdrop>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <!--  TitleBar  -->
            <RowDefinition Height="*" />
            <!--  NavView  -->
        </Grid.RowDefinitions>
        <Border
             x:Name="AppTitleBar"
             Grid.Column="1"
             Height="{Binding ElementName=NavigationViewControl, Path=CompactPaneLength}"
             Margin="48,0,0,0"
             VerticalAlignment="Stretch"
             AutomationProperties.AutomationId="AppTitleBar"
             Canvas.ZIndex="1"
             IsHitTestVisible="True">
            <StackPanel VerticalAlignment="Stretch" Orientation="Horizontal">
                <Image Width="18" VerticalAlignment="Center" Source="ms-appx:///Assets/Tiles/TitlebarLogo.png" />
                <TextBlock
                 x:Name="AppTitle"
                 Margin="12,-1,0,0"
                 VerticalAlignment="Center"
                 Style="{StaticResource CaptionTextBlockStyle}"
                 Text="AtlasOS Toolbox" />
                <TextBox x:Name="AppTitleBarTextBox" MinWidth="300" Height="40" Margin="16,0,0,0" Visibility="Collapsed"  PlaceholderText="Enter any text" />
            </StackPanel>
        </Border>
        <NavigationView
             x:Name="NavigationViewControl"
             Grid.RowSpan="2"
             Grid.Column="1"
             IsTitleBarAutoPaddingEnabled="False"
             AlwaysShowHeader="True"
             Header="Default Header"
             IsTabStop="False" 
             BackRequested="NavigationViewControl_BackRequested" 
             ItemInvoked="NavigationViewControl_ItemInvoked">

           
            <NavigationView.Content>
                <Grid>
                    <Frame x:Name="ContentFrame" Navigated="ContentFrame_Navigated"/>
                </Grid>
            </NavigationView.Content>

            <NavigationView.PaneFooter>
                <!--Alpha version message, to be removed at release-->
                <StackPanel>
                    <InfoBar
                        Margin="16 0 16 10"
                        IsOpen="True"
                        IsIconVisible="True"
                        IsClosable="False"
                        Severity="Warning"
                        Title="Unstable"
                        Message="Use of this app is currently for testing purposes only. The app may contain bugs which could break your Windows install. Use at your own risk." />
                    <InfoBar
                        Margin="16 0 16 0"
                        IsOpen="True"
                        IsIconVisible="True"
                        IsClosable="False"
                        Title="Alpha Version"
                        Message="This application is currently in an Alpha version. If you find bugs, or want to suggest a feature, please give feedback on the Discord. Features are subject to change." />
                </StackPanel>
            </NavigationView.PaneFooter>
            
            <NavigationView.Resources>
                <!--  This top margin is the height of the custom titleBar  -->
                <Thickness x:Key="NavigationViewContentMargin">0,48,0,0</Thickness>
                <Thickness x:Key="NavigationViewMinimalContentMargin">0,48,0,0</Thickness>
                <Thickness x:Key="NavigationViewContentGridBorderThickness">1,1,0,0</Thickness>
                <!--  This is the rounded corner on the Top left of the L Pattern  -->
                <CornerRadius x:Key="NavigationViewContentGridCornerRadius">8,0,0,0</CornerRadius>
            </NavigationView.Resources>


            <NavigationView.MenuItems>
                <NavigationViewItem Icon="Home" Content="Home" Tag="AtlasToolbox.Views.HomePage"/>
                <NavigationViewItem Content="General Configuration" Tag="AtlasToolbox.Views.GeneralConfig">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xF259;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                <NavigationViewItem Content="Interface Tweaks" Tag="AtlasToolbox.Views.InterfaceTweaks">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE932;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                <NavigationViewItem Content="Windows Settings" Tag="AtlasToolbox.Views.WindowsSettings">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE977;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                <NavigationViewItem Content="Advanced Config" Tag="AtlasToolbox.Views.AdvancedConfig">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xEC7A;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                <NavigationViewItem Content="Security" Tag="AtlasToolbox.Views.Security">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE83D;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
                <NavigationViewItem Content="Troubleshooting" Tag="AtlasToolbox.Views.Troubleshooting">
                    <NavigationViewItem.Icon>
                        <FontIcon Glyph="&#xE7BA;" />
                    </NavigationViewItem.Icon>
                </NavigationViewItem>
            </NavigationView.MenuItems>
        </NavigationView>
<!--#region CustomContentDialog-->
        <StackPanel
                x:Name="ContentDialogBasePanel"
                Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
                Opacity="0.5"
                Visibility="Collapsed" />
        <StackPanel
                x:Name="ContentDialogPanel"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Visibility="Collapsed">
            <TextBlock Text="Some message." />
        </StackPanel>
<!--#endregion CustomContentDialog-->
    </Grid>
</Window>
